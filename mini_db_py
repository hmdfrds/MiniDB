import os

DB_NAME = "data.txt"


def add(data):
    id = data.split(",")[0]
    if not validate_id(id):
        return
    try:
        with open(DB_NAME, "a") as file:
            file.write(data + "\n")
    except Exception as e:
        print(f"Error while writing to file: {e}")


def validate_id(id):
    if search(id) == None:
        return True
    else:
        print(f"id {id} already exist")
        return False


def search(id):
    if os.path.exists(DB_NAME):
        with open(DB_NAME) as file:
            for line in file:
                if line.split(",")[0] == id:
                    return line
    return None


def main():
    print("Welcome to MiniDB")
    add("1,John Doe,25")


if __name__ == "__main__":
    main()
